<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>  
<script src="http://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</head>
<body>

<h3>upload file</h3>

<form id="upload_file_frm">
	<input type="file" id="_uploadFile" name="uploadFile" accept="*">
	<button type="button" id="uploadFileBtn">파일 업 로드</button>
	<p id="uploadResult"></p>
</form>

<br>

<h3>download file</h3>

<button type="button" id="downBtn">파일 다운로드</button>

<script type="text/javascript">
$(document).ready(function () {
	$("#uploadFileBtn").click(function () {
		
		$.ajax({
			url:"http://localhost:3000/fileUpload",
			type:"post",
			data:new FormData($("#upload_file_frm")[0]), // 자바스트립트에서 제공해주는 함수 ->$("#upload_file_frm")[0]은 input에 데이터값을 보내주게 된다
			enctype:'multipart/form-data',
			processData:false,
			contentType:false,
			cache:false,
			success:function(data){
				alert('success');
				alert(data);
			},
			error:function(){
				alert('error');
			}
		});
	});
	
	$("#downBtn").click(function () {
		
		location.href = "http://localhost:3000/fileDownload?fileName=" + "KakaoTalk_20210409_125250177.jpg";
		
		/* 파일 다운은 ajax를 사용하면 안된다!! 대신 위에 있는 location.href를 사용
		$.ajax({
			url:"http://localhost:3000/fileDownload",
			type:"get",
			data:{ fileName:'KakaoTalk_20210409_125250177.jpg' },
			success:function(data){
				alert('seccess');
			},
			error:function(){
				alert('erro');
			}
		});
		*/
	});
});

</script>

</body>
</html>


















